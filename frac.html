<html>
    <head>
        <script type = "text/javascript">

            window.onload = doload;

            function doload(){
                var c=document.getElementById("m");
                var ctx=c.getContext("2d");

                draw_string = 'fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf+fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf+fx+yf+fx-yf-fx+yf-fx-yf-fx+yf+fx-yf+fx+yf-fx-yf-fx+yf+fx-yf-fx+yf-fx-yf'

                ctx.fillStyle="#000000";
                x = 200;
                y = 200;
                bearing = 1;
                ctx.moveTo(x, y);
                var counter = 0;
                ticker(counter, ctx);

                function ticker(){
                    console.log("ticker" + counter);
                    draw_step(ctx, counter);
                    counter+=1;
                    setInterval(ticker, 2000);
                }

            }

            function draw_step(ctx, i){
                console.log("draw");
                if(i <= draw_string.length){
                    if(draw_string.charAt(i) == 'f'){
                        console.log(draw_string.charAt(i));
                        coords = drawto(ctx, x, y, bearing, 10);
                        x = coords[0];
                        y = coords[1];
                    }else if(draw_string.charAt(i) == '+'){
                        console.log(draw_string.charAt(i));
                        bearing = right(bearing);
                    }else if(draw_string.charAt(i) == '-'){
                        console.log(draw_string.charAt(i));
                        bearing = left(bearing);
                    }
                }
            }

            function drawto(context, x, y, bearing, distance){
                if(bearing == 0){
                    y = y - distance;
                }else if(bearing == 1){
                    x = x + distance;
                }else if(bearing == 2){
                    y = y + distance;
                }else if(bearing == 3){
                    x = x - distance;
                }

                context.lineTo(x, y);
                context.stroke();
                return [x, y];
                
            }

            function right(bearing){
                if(bearing != 3){
                    return bearing+=1;
                }else{
                    return bearing = 0;
                }
            }

            function left(bearing){
                if(bearing != 0){
                    return bearing-=1;
                }else{
                    return bearing = 3;
                }
            }

        </script>

    </head>
    </body>
        <canvas id="m" width=1000 height=1000></canvas>
    </body>
</html>
